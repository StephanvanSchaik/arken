# arken

arken is a Rust library that provides primitives to quickly build append-only log formats that can be searched through efficiently. It aims to use zero-copy where possible (e.g. by relying on `Cow<'a, T>` to avoid expensive allocations).

## Motivation

Applications often have to store state to disk such that they can later recover this state. Typically, applications will serialize this state and write the serialized byte stream to a file. However, there are a few possible problems with this approach. First, if there is a lot of state to serialize, the serialization and deserialization process becomes noticeably slow, especially if the state involves types such as `String` and `Vec<T>` requiring allocations. Second, if the write process gets interrupted in the middle (e.g. because the program crashed), the state on disk might be in an irrecoverable state. Append-only log formats overcome this by only ever appending to a file, which is guaranteed to be atomic up to a certain write size. This means that each append operation either completes fully or has no effect, and as such is either fully visible to all observers or not at all. We can leverage this primitive to implement transactions, where if the last append does not succeed, the prior appends of the same transaction are simply ignored as if the transaction did not happen. This not only guarantees resiliency, but also provides us a version history of our state, which allow us to go back in time if we so desire.
